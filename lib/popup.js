// Generated by CoffeeScript 1.6.3
(function() {
  var setKeysFromBg;

  setKeysFromBg = function() {
    return $.each(Util.KEYS, function(_, key) {
      return chrome.extension.sendMessage({
        key: key
      }, function(res) {
        return $("#" + key + "Input").val(res.key);
      });
    });
  };

  $(function() {
    $('#resetButton').click(function() {
      return chrome.extension.sendMessage({
        resetDefaults: true
      }, function(res) {
        return setKeysFromBg();
      });
    });
    $('#saveButton').click(function() {
      var key, newKey, newKeys, _, _ref;
      newKeys = {};
      _ref = Util.KEYS;
      for (_ in _ref) {
        key = _ref[_];
        newKey = $.trim($("#" + key + "Input").val()).toLowerCase();
        if (newKey !== '') {
          newKeys[key] = newKey;
        }
      }
      $('.notice').remove();
      return chrome.extension.sendMessage({
        saveKeys: newKeys
      }, function(res) {
        $('#noticeBox').append("<div class='notice'>\n  <span class=\"glyphicon glyphicon-floppy-saved\"></span> Settings have been saved.\n  <br />\n  Reload page to use new shortcuts.\n</div>");
        return $('.notice').delay(5000).fadeOut('slow', function() {
          return $(this).remove();
        });
      });
    });
    return setKeysFromBg();
  });

}).call(this);
